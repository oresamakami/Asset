<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('CSV一括登録 - 資産管理')}"></head>
<body>
<nav th:replace="~{fragments/layout :: navbar}"></nav>

<div class="container" style="max-width:640px">
    <h2 class="mb-4"><i class="bi bi-file-earmark-spreadsheet me-2"></i>社員CSV一括登録</h2>

    <!-- 結果メッセージ -->
    <div th:if="${successCount != null}" class="alert alert-success">
        <i class="bi bi-check-circle me-1"></i>
        <span th:text="${successCount}"></span> 件の社員を登録しました。
    </div>
    <div th:if="${error != null}" class="alert alert-danger">
        <i class="bi bi-exclamation-triangle me-1"></i>
        <span th:text="${error}"></span>
    </div>
    <div th:if="${errors != null}" class="alert alert-warning">
        <i class="bi bi-exclamation-triangle me-1"></i>以下のエラーがあります:
        <ul class="mb-0 mt-2">
            <li th:each="err : ${errors}" th:text="${err}"></li>
        </ul>
    </div>

    <!-- Step 1: テンプレートダウンロード -->
    <div class="card p-4 mb-4">
        <h5 class="mb-3">Step 1: テンプレートをダウンロード</h5>
        <p class="text-muted">
            CSVファイルのフォーマットを確認し、テンプレートに社員情報を入力してください。
        </p>
        <a href="/employees/csv/template" class="btn btn-outline-primary">
            <i class="bi bi-download me-1"></i>テンプレートCSVダウンロード
        </a>

        <div class="mt-3">
            <small class="text-muted">CSVフォーマット (UTF-8):</small>
            <div class="bg-light p-2 rounded mt-1">
                <code>社員番号,氏名,部署,課</code><br>
                <code>EMP001,山田太郎,情報システム部,インフラ課</code>
            </div>
        </div>
    </div>

    <!-- Step 2: CSVアップロード -->
    <div class="card p-4">
        <h5 class="mb-3">Step 2: CSVファイルをアップロード</h5>
        <form action="/employees/csv/upload" method="post" enctype="multipart/form-data">
            <div class="mb-3">
                <label class="form-label">CSVファイルを選択</label>
                <input type="file" class="form-control" name="file"
                       accept=".csv" required>
                <div class="form-text">UTF-8 エンコードの CSV ファイルを選択してください。</div>
            </div>
            <button type="submit" class="btn btn-success">
                <i class="bi bi-upload me-1"></i>アップロードして一括登録
            </button>
        </form>
    </div>

    <div class="mt-3">
        <a href="/employees" class="btn btn-outline-secondary">
            <i class="bi bi-arrow-left me-1"></i>社員一覧に戻る
        </a>
    </div>
</div>

<footer th:replace="~{fragments/layout :: footer}"></footer>
</body>
</html>
